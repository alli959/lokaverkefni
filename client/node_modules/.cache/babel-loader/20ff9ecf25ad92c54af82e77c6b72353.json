{"ast":null,"code":"import _regeneratorRuntime from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/src/components/materials/Materials.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { fetchMaterials } from '../../actions/getMaterials';\nimport { fetchMatFromFood } from '../../actions/getMaterialsFromFood';\nimport './materials.css';\n\nvar Materials =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Materials, _Component);\n\n  function Materials() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Materials);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Materials)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      checked: [],\n      isFetchingMaterials: false,\n      materials: null,\n      messageMaterials: null,\n      matInFood: [\"NONE\"],\n      foodId: 0,\n      itemId: -1\n    };\n\n    _this.handleCheck = function (e) {\n      var isChecked = e.target.checked;\n      var name = e.target.name;\n      var price = e.target.value;\n\n      if (isChecked) {\n        _this.props.plusHandler({\n          name: name,\n          price: price\n        });\n      } else {\n        _this.props.minusHandler(name);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Materials, [{\n    key: \"componentDidUpdate\",\n    value: function () {\n      var _componentDidUpdate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(prevProps) {\n        var dispatch, foodId, itemId, materials, matInFood, minus, plus;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch = this.props.dispatch;\n                foodId = this.props.foodId;\n                itemId = this.props.itemId;\n                materials = this.props.materials;\n                matInFood = this.props.matInFood;\n                minus = this.props.minus;\n                plus = this.props.plus;\n\n                if (!(prevProps.itemId !== this.props.itemId)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                console.log(\"prevProps\", prevProps);\n                _context.next = 11;\n                return dispatch(fetchMatFromFood(foodId));\n\n              case 11:\n                this.setState({\n                  foodId: foodId,\n                  itemId: itemId,\n                  matInFood: matInFood\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidUpdate(_x) {\n        return _componentDidUpdate.apply(this, arguments);\n      }\n\n      return componentDidUpdate;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var dispatch, foodId, itemId, minus, plus, checked, materials, matInFood;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dispatch = this.props.dispatch;\n                foodId = this.props.foodId;\n                itemId = this.props.itemId;\n                minus = this.props.minus;\n                plus = this.props.plus;\n                checked = [];\n                _context2.next = 8;\n                return this.props.materials;\n\n              case 8:\n                materials = _context2.sent;\n                _context2.next = 11;\n                return this.props.matInFood;\n\n              case 11:\n                matInFood = _context2.sent;\n                _context2.next = 14;\n                return dispatch(fetchMatFromFood(foodId));\n\n              case 14:\n                _context2.next = 16;\n                return dispatch(fetchMaterials());\n\n              case 16:\n                this.setState({\n                  foodId: foodId,\n                  itemId: itemId,\n                  materials: materials,\n                  matInFood: matInFood\n                });\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"isChecked\",\n    value: function isChecked(material, matInFood, price) {\n      var minus = this.props.minus;\n      var plus = this.props.plus;\n      var itemId = this.props.itemId;\n      var temp = [];\n\n      for (var i = 0; i < matInFood.length; i++) {\n        temp.push(matInFood[i]);\n      }\n\n      if (itemId != -1) {\n        console.log(\"tempBefore\", temp);\n        var minusMat = minus[itemId].split(',');\n        var plusMat = plus[itemId].split(','); //first remove from temp the minus materials\n\n        for (var _i = 0; _i < minusMat.length; _i++) {\n          for (var j = 0; j < temp.length; j++) {\n            if (minusMat[_i] === temp[j].materialname) {\n              temp.splice(j, 1);\n              console.log(\"tempAfter\", temp);\n              break;\n            }\n          }\n        } //start by creating a dict for the temp\n\n\n        var materialDict = {};\n\n        for (var _i2 = 0; _i2 < temp.length; _i2++) {\n          materialDict[temp[_i2].materialname] = true;\n        } //now add to temp the plus materials\n\n\n        for (var _i3 = 0; _i3 < plusMat.length; _i3++) {\n          if (!(plusMat[_i3] in materialDict)) {\n            if (plusMat[_i3] !== \"NONE\") {\n              temp.push({\n                materialname: plusMat[_i3]\n              });\n            }\n          }\n        }\n      }\n\n      for (var _i4 = 0; _i4 < temp.length; _i4++) {\n        if (temp[_i4].materialname === material) {\n          for (var _j = 0; _j < temp.length; _j++) {}\n\n          return React.createElement(\"li\", {\n            className: \"material\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            className: \"checkbox\",\n            type: \"checkbox\",\n            id: material,\n            name: material,\n            value: price,\n            onClick: this.handleCheck,\n            defaultChecked: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }), React.createElement(\"label\", {\n            htmlFor: material,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178\n            },\n            __self: this\n          }, material));\n        }\n      }\n\n      return React.createElement(\"li\", {\n        className: \"material\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"checkbox\",\n        type: \"checkbox\",\n        id: material,\n        name: material,\n        value: price,\n        onClick: this.handleCheck,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: material,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, material));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          foodId = _this$props.foodId,\n          isFetchingMaterials = _this$props.isFetchingMaterials,\n          materials = _this$props.materials,\n          isFetchingMatInFood = _this$props.isFetchingMatInFood,\n          minus = _this$props.minus,\n          plus = _this$props.plus;\n      var matInFood = this.props.matInFood;\n      var itemId = this.props.itemId;\n\n      if (isFetchingMaterials || !materials || isFetchingMatInFood || !matInFood) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, \"s\\xE6ki \\xE1legg...\");\n      }\n\n      var result = materials.result;\n\n      if (!result) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, \"S\\xED\\xF0a finnst ekki, vinsamlegast reyndu aftur\"));\n      }\n\n      if (itemId === -1) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }, \"Select Food Item To Change\");\n      } else {\n        return React.createElement(\"div\", {\n          className: \"materials\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          className: \"materialsBox\",\n          \"data-columns\": \"2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, console.log(this.props.matInFood), result.map(function (materials, index) {\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242\n            },\n            __self: this\n          }, _this2.isChecked(materials.material, matInFood, materials.price));\n        })));\n      }\n    }\n  }]);\n\n  return Materials;\n}(Component);\n\nMaterials.propTypes = {\n  dispatch: PropTypes.func,\n  minusHandler: PropTypes.func,\n  plusHandler: PropTypes.func,\n  minus: PropTypes.array,\n  plus: PropTypes.array,\n  plusPrice: PropTypes.array,\n  isFetchingMaterials: PropTypes.bool,\n  itemId: PropTypes.number,\n  foodId: PropTypes.number,\n  materials: PropTypes.object,\n  messageMaterials: PropTypes.object,\n  matInFood: PropTypes.array\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isFetchingMaterials: state.getMaterials.isFetching,\n    materials: state.getMaterials.material,\n    messageMaterials: state.getMaterials.message,\n    isFetchingMatInFood: state.getMatFromFood.isFetching,\n    matInFood: state.getMatFromFood.matInFood,\n    messageMatInFood: state.getMatFromFood.message\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(Materials));","map":{"version":3,"sources":["/home/alli959/Desktop/Háslóli Íslands 2-20191211T231337Z-001/Háslóli Íslands 2/lokaverkefni/client/src/components/materials/Materials.js"],"names":["React","Component","connect","PropTypes","withRouter","fetchMaterials","fetchMatFromFood","Materials","state","checked","isFetchingMaterials","materials","messageMaterials","matInFood","foodId","itemId","handleCheck","e","isChecked","target","name","price","value","props","plusHandler","minusHandler","prevProps","dispatch","minus","plus","console","log","setState","material","temp","i","length","push","minusMat","split","plusMat","j","materialname","splice","materialDict","isFetchingMatInFood","result","map","index","propTypes","func","array","plusPrice","bool","number","object","mapStateToProps","getMaterials","isFetching","message","getMatFromFood","messageMatInFood"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport {withRouter } from 'react-router-dom'\r\n\r\n\r\n\r\nimport { fetchMaterials } from '../../actions/getMaterials'\r\nimport { fetchMatFromFood } from '../../actions/getMaterialsFromFood';\r\n\r\n\r\nimport './materials.css';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Materials extends Component {\r\n\r\n    state = {\r\n        checked: [],\r\n        isFetchingMaterials: false,\r\n        materials: null,\r\n        messageMaterials: null,\r\n        matInFood: [\"NONE\"],\r\n        foodId: 0,\r\n        itemId: -1,\r\n    }\r\n\r\n    static propTypes = {\r\n        dispatch: PropTypes.func,\r\n        minusHandler: PropTypes.func,\r\n        plusHandler: PropTypes.func,\r\n        minus: PropTypes.array,\r\n        plus: PropTypes.array,\r\n        plusPrice: PropTypes.array,\r\n        isFetchingMaterials: PropTypes.bool,\r\n        itemId: PropTypes.number,\r\n        foodId: PropTypes.number,\r\n        materials: PropTypes.object,\r\n        messageMaterials: PropTypes.object,\r\n        matInFood: PropTypes.array,\r\n\r\n    }\r\n\r\n    async componentDidUpdate(prevProps){\r\n        const {dispatch} = this.props;\r\n        const {foodId} = this.props;\r\n        const {itemId} = this.props;\r\n        const {materials} = this.props;\r\n        const {matInFood} = this.props;\r\n        const {minus} = this.props;\r\n        const {plus} = this.props;\r\n\r\n\r\n\r\n\r\n        if(prevProps.itemId !== this.props.itemId){\r\n            console.log(\"prevProps\",prevProps);\r\n            await dispatch(fetchMatFromFood(foodId));\r\n            this.setState({\r\n                foodId: foodId,\r\n                itemId: itemId,\r\n                matInFood: matInFood\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { dispatch} = this.props;\r\n        let {foodId} =  this.props;\r\n        let {itemId} =  this.props;\r\n        let {minus} = this.props;\r\n        let {plus} = this.props;\r\n\r\n        let checked = [];\r\n\r\n        \r\n        \r\n        const materials = await this.props.materials;\r\n        const matInFood = await this.props.matInFood;\r\n        \r\n            \r\n\r\n        await dispatch(fetchMatFromFood(foodId));\r\n        await dispatch(fetchMaterials());\r\n        this.setState({\r\n            foodId: foodId,\r\n            itemId: itemId,\r\n            materials: materials,\r\n            matInFood: matInFood,\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    handleCheck = (e) => {\r\n        const isChecked = e.target.checked;\r\n        const name = e.target.name;\r\n        const price = e.target.value;\r\n        if(isChecked){\r\n            this.props.plusHandler({name: name, price: price});\r\n        }\r\n        else{\r\n            this.props.minusHandler(name);\r\n        }\r\n        \r\n        \r\n    }\r\n    \r\n\r\n    \r\n    \r\n        \r\n    \r\n\r\n\r\n    isChecked(material,matInFood, price){\r\n        const {minus} = this.props;\r\n        const {plus} = this.props;\r\n        const {itemId} = this.props;\r\n\r\n        let temp = [];\r\n\r\n        for(let i = 0; i<matInFood.length; i++){\r\n            temp.push(matInFood[i]);\r\n        }\r\n\r\n\r\n        if(itemId != -1){\r\n            console.log(\"tempBefore\",temp);\r\n            const minusMat = minus[itemId].split(',');\r\n            const plusMat = plus[itemId].split(',');\r\n            //first remove from temp the minus materials\r\n            for(let i = 0; i<minusMat.length; i++){\r\n                for(let j = 0; j<temp.length; j++){\r\n                    if(minusMat[i] === temp[j].materialname){\r\n                        temp.splice(j,1);\r\n                        console.log(\"tempAfter\",temp);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            \r\n            //start by creating a dict for the temp\r\n            let materialDict = {};\r\n            \r\n            for(let i = 0; i<temp.length; i++){\r\n                materialDict[temp[i].materialname] = true;\r\n            }\r\n            //now add to temp the plus materials\r\n            \r\n            \r\n            for(let i = 0; i<plusMat.length; i++){\r\n                if(!(plusMat[i] in materialDict)){\r\n                    if(plusMat[i] !== \"NONE\"){\r\n                        \r\n                        temp.push({materialname: plusMat[i]})\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i<temp.length; i++){\r\n\r\n            if(temp[i].materialname === material){\r\n                for(let j = 0; j<temp.length; j++){\r\n\r\n                }\r\n                return(\r\n                    <li className = \"material\">\r\n                            <input className = \"checkbox\" type=\"checkbox\" id={material} name={material} value = {price} onClick = {this.handleCheck} defaultChecked/>\r\n                            <label htmlFor={material}>{material}</label>\r\n                    </li>\r\n                )\r\n            }\r\n        }\r\n        return(\r\n            <li  className = \"material\">\r\n                <input className = \"checkbox\" type=\"checkbox\" id={material} name={material} value = {price} onClick = {this.handleCheck}/>\r\n                <label htmlFor={material}>{material}</label>\r\n            </li>\r\n        )\r\n               \r\n    }\r\n\r\n\r\n\r\n\r\n      \r\n\r\n\r\n\r\n    render() {\r\n\r\n        const {foodId, isFetchingMaterials, materials, isFetchingMatInFood, minus, plus} = this.props;\r\n        let matInFood = this.props.matInFood\r\n        let itemId = this.props.itemId;\r\n\r\n        \r\n        if(isFetchingMaterials || !materials || isFetchingMatInFood || !matInFood) {\r\n            return (\r\n                <div>\r\n                    sæki álegg...\r\n                </div>\r\n            );\r\n        }\r\n        let result = materials.result;\r\n\r\n\r\n        if(!result){\r\n            return (\r\n                <div>\r\n                    <h2>Síða finnst ekki, vinsamlegast reyndu aftur</h2>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if(itemId === -1){\r\n            return(\r\n                <div>\r\n                    Select Food Item To Change\r\n                </div>\r\n            )\r\n        }\r\n        else{\r\n\r\n\r\n        \r\n\r\n            return (\r\n                <div className = \"materials\">\r\n                \r\n                    <ul className = \"materialsBox\" data-columns=\"2\">\r\n                        {console.log(this.props.matInFood)}\r\n                        {result.map((materials,index) =>\r\n                        <div key = {index}>\r\n                                {this.isChecked(materials.material,matInFood,materials.price)}\r\n                        </div>\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            )\r\n                        }\r\n        }\r\n\r\n        \r\n\r\n        \r\n\r\n    \r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n    return {\r\n        isFetchingMaterials: state.getMaterials.isFetching,\r\n        materials: state.getMaterials.material,\r\n        messageMaterials: state.getMaterials.message,\r\n        \r\n        isFetchingMatInFood: state.getMatFromFood.isFetching,\r\n        matInFood: state.getMatFromFood.matInFood,\r\n        messageMatInFood: state.getMatFromFood.message\r\n\r\n    \r\n    };\r\n        \r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Materials));"]},"metadata":{},"sourceType":"module"}