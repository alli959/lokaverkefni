{"ast":null,"code":"import _regeneratorRuntime from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alli959/Desktop/H\\xE1sl\\xF3li \\xCDslands 2-20191211T231337Z-001/H\\xE1sl\\xF3li \\xCDslands 2/lokaverkefni/client/src/routes/menu/Menu.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Offers from '../../components/offers';\nimport Burgers from '../../components/burgers';\nimport { fetchFoods } from '../../actions/getFood';\nimport Materials from '../../components/materials';\nimport Boats from '../../components/boats';\nimport Sandwiches from '../../components/sandwiches';\nimport Navbar from '../../components/navbar';\nimport OrderView from '../../components/orderView';\nimport ChangeOrder from '../../components/changeOrder';\nimport FinishOrder from '../../components/finishOrder';\nimport './menu.css';\n\nvar Menu =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Menu, _Component);\n\n  function Menu(props) {\n    var _this;\n\n    _classCallCheck(this, Menu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Menu).call(this, props));\n    _this.state = {\n      foodId: 0,\n      itemId: -1,\n      countItemsInFood: [],\n      foods: null,\n      isFetching: false,\n      foodToChange: null,\n      minus: [],\n      plus: [],\n      plusPrice: [],\n      message: null,\n      itemsInOrderView: []\n    };\n\n    _this.materialsPlus = function (e) {\n      var itemId = _this.state.itemId;\n      var plus = _this.state.plus;\n      var minus = _this.state.minus;\n      var plusPrice = _this.state.plusPrice;\n      var doesExist = false; //check if added Material is already in minus\n\n      var minusArr = minus[itemId].split(',');\n\n      if (minus[itemId] !== \"NONE\") {\n        for (var i = 0; i < minusArr.length; i++) {\n          if (minusArr[i] === e.name) {\n            doesExist = true;\n            minusArr.splice(i);\n\n            if (minusArr.length !== 0) {\n              minus[itemId] = minusArr.join(',');\n            } else {\n              minus[itemId] = \"NONE\";\n            }\n\n            break;\n          }\n        }\n      }\n\n      if (!doesExist) {\n        if (plus[itemId] === \"NONE\") {\n          plus[itemId] = e.name;\n          plusPrice[itemId] = e.price.toString();\n        } else {\n          plus[itemId] = plus[itemId] + ',' + e.name;\n          plusPrice[itemId] = plusPrice[itemId] + ',' + e.price.toString();\n        }\n      }\n\n      _this.setState({\n        plus: plus,\n        minus: minus,\n        plusPrice: plusPrice\n      });\n\n      console.log(\"MitemId\", itemId);\n      console.log(\"Mplus\", plus);\n      console.log(\"Mminus\", minus);\n      console.log(\"plusPrice\", plusPrice);\n    };\n\n    _this.materialsMinus = function (e) {\n      var itemId = _this.state.itemId;\n      var plus = _this.state.plus;\n      var minus = _this.state.minus;\n      var plusPrice = _this.state.plusPrice;\n      var doesExist = false; //check if removed Material is already in plus\n\n      if (plus[itemId] !== \"NONE\") {\n        var plusArr = plus[itemId].split(',');\n        var plusPriceArr = plusPrice[itemId].split(',');\n\n        for (var i = 0; i < plusArr.length; i++) {\n          if (plusArr[i] === e) {\n            doesExist = true;\n            plusArr.splice(i);\n            plusPriceArr.splice(i);\n\n            if (plusArr.length !== 0) {\n              plus[itemId] = plusArr.join(',');\n              plusPrice[itemId] = plusPriceArr.join(',');\n            } else {\n              plus[itemId] = \"NONE\";\n              plusPrice[itemId] = \"NONE\";\n            }\n\n            break;\n          }\n        }\n      }\n\n      if (!doesExist) {\n        if (minus[itemId] === \"NONE\") {\n          minus[itemId] = e;\n        } else {\n          minus[itemId] = minus[itemId] + ',' + e;\n        }\n      }\n\n      _this.setState({\n        plus: plus,\n        minus: minus,\n        plusPrice: plusPrice\n      });\n\n      console.log(\"PitemId\", itemId);\n      console.log(\"Pplus\", plus);\n      console.log(\"Pminus\", minus);\n      console.log(\"plusPrice\", plusPrice);\n    };\n\n    _this.handleNewItemInOrder = function (e) {\n      var itemsInOrderView = _this.state.itemsInOrderView;\n      itemsInOrderView.push(e);\n      var minus = _this.state.minus;\n      var plus = _this.state.plus;\n      var plusPrice = _this.state.plusPrice;\n      var containsText = e.contains;\n      console.log(containsText);\n      var countItemsInFood = _this.state.countItemsInFood;\n\n      if (e.name.includes(\"Tilboð\")) {\n        var contains = containsText.split(',');\n\n        for (var i = 0; i < contains.length; i++) {\n          plusPrice.push(\"NONE\");\n          minus.push(\"NONE\");\n          plus.push(\"NONE\");\n        }\n\n        countItemsInFood.push(contains.length);\n      } else {\n        plusPrice.push(\"NONE\");\n        plus.push(\"NONE\");\n        minus.push(\"NONE\");\n        countItemsInFood.push(1);\n      }\n\n      _this.setState({\n        plus: plus,\n        minus: minus,\n        itemsInOrderView: itemsInOrderView,\n        countItemsInFood: countItemsInFood\n      });\n    };\n\n    _this.handleOrderViewAction = function (e) {\n      if (e === \"clear\") {\n        _this.setState({\n          minus: [],\n          plus: [],\n          itemsInOrderView: []\n        });\n      }\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleMaterialsInFood = function (e) {\n      _this.setState({\n        foodId: e\n      });\n    };\n\n    _this.changeFoodToCheck = function (e) {\n      var itemId = e.itemId;\n      var foodId = e.foodId;\n\n      if (itemId === _this.state.itemId) {\n        _this.setState({\n          itemId: -1,\n          foodId: -1\n        });\n      } else {\n        _this.setState({\n          itemId: itemId,\n          foodId: foodId\n        });\n      }\n    };\n\n    _this.handleButtonClick = function (e) {\n      if (e === \"finish\") {}\n\n      if (Array.isArray(e)) {\n        var food = _this.props.foods.result;\n        var foodToChange = e[1];\n        var orderItemToChange = _this.state.itemsInOrderView[e[2]];\n        var materialsToChange = \"\";\n        food.map(function (result) {\n          if (result.name === foodToChange) {\n            materialsToChange = result.contains;\n          }\n        });\n\n        _this.setState({\n          foodToChange: foodToChange,\n          orderItemToChange: orderItemToChange,\n          materialsToChange: materialsToChange\n        });\n      } else if (e === \"clear\") {\n        _this.setState({\n          itemsInOrderView: []\n        });\n      } else {\n        if (e !== \"change\" && e !== \"finish\") {\n          var itemsInOrderView = _this.state.itemsInOrderView;\n          itemsInOrderView.push(e);\n\n          _this.setState({\n            itemsInOrderView: itemsInOrderView\n          });\n        }\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Menu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var dispatch = this.props.dispatch;\n      var foods = this.props.foods;\n      this.setState({\n        foods: foods\n      }, function () {\n        console.log(\"foods\", _this2.state.foods);\n      });\n      dispatch(fetchFoods());\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.location.hash !== this.props.location.hash) {\n        this.setState({\n          itemId: -1\n        });\n      }\n    }\n    /**ACTIONS */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      switch (this.props.location.hash) {\n        case '#offers':\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 312\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"Navbar\",\n            style: {\n              backgroundColor: 'rgb(255, 188, 5)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 313\n            },\n            __self: this\n          }, React.createElement(Navbar, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 314\n            },\n            __self: this\n          })), React.createElement(OrderView, {\n            food: this.state.itemsInOrderView,\n            clickHandler: this.handleOrderViewAction,\n            minus: this.state.minus,\n            plus: this.state.plus,\n            plusPrice: this.state.plusPrice,\n            countItemsInFood: this.state.countItemsInFood,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 317\n            },\n            __self: this\n          }), React.createElement(\"h1\", {\n            className: \"Menu_title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 321\n            },\n            __self: this\n          }, \"Tilbo\\xF0\"), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322\n            },\n            __self: this\n          }, React.createElement(Offers, {\n            clickHandler: this.handleNewItemInOrder,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 323\n            },\n            __self: this\n          })));\n\n        case '#burgers':\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 333\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"Navbar\",\n            style: {\n              backgroundColor: 'rgb(255, 188, 5)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 334\n            },\n            __self: this\n          }, React.createElement(Navbar, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 335\n            },\n            __self: this\n          })), React.createElement(OrderView, {\n            food: this.state.itemsInOrderView,\n            clickHandler: this.handleOrderViewAction,\n            minus: this.state.minus,\n            plus: this.state.plus,\n            plusPrice: this.state.plusPrice,\n            countItemsInFood: this.state.countItemsInFood,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 337\n            },\n            __self: this\n          }), \"                        \", React.createElement(\"h1\", {\n            className: \"Menu_title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 341\n            },\n            __self: this\n          }, \"Borgarar\"), React.createElement(Burgers, {\n            clickHandler: this.handleNewItemInOrder,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 342\n            },\n            __self: this\n          }));\n\n        case '#boats':\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"Navbar\",\n            style: {\n              backgroundColor: 'rgb(255, 188, 5)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 350\n            },\n            __self: this\n          }, React.createElement(Navbar, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 351\n            },\n            __self: this\n          })), React.createElement(OrderView, {\n            food: this.state.itemsInOrderView,\n            clickHandler: this.handleOrderViewAction,\n            minus: this.state.minus,\n            plus: this.state.plus,\n            plusPrice: this.state.plusPrice,\n            countItemsInFood: this.state.countItemsInFood,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 353\n            },\n            __self: this\n          }), \"                        \", React.createElement(\"h1\", {\n            className: \"Menu_title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 357\n            },\n            __self: this\n          }, \"B\\xE1tar\"), React.createElement(Boats, {\n            clickHandler: this.handleNewItemInOrder,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 358\n            },\n            __self: this\n          }));\n\n        case '#sandwiches':\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 364\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            classname: \"Navbar\",\n            style: {\n              backgroundColor: 'rgb(255, 188, 5)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 365\n            },\n            __self: this\n          }, React.createElement(Navbar, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 366\n            },\n            __self: this\n          })), React.createElement(OrderView, {\n            food: this.state.itemsInOrderView,\n            clickHandler: this.handleOrderViewAction,\n            minus: this.state.minus,\n            plus: this.state.plus,\n            plusPrice: this.state.plusPrice,\n            countItemsInFood: this.state.countItemsInFood,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 368\n            },\n            __self: this\n          }), \"                        \", React.createElement(\"h1\", {\n            className: \"Menu_title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372\n            },\n            __self: this\n          }, \"Samlokur\"), React.createElement(Sandwiches, {\n            clickHandler: this.handleNewItemInOrder,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 373\n            },\n            __self: this\n          }));\n\n        case '#changeorder':\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 379\n            },\n            __self: this\n          }, React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 380\n            },\n            __self: this\n          }, React.createElement(ChangeOrder, {\n            items: this.state.itemsInOrderView,\n            clickHandler: this.changeFoodToCheck,\n            plus: this.state.plus,\n            minus: this.state.minus,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 381\n            },\n            __self: this\n          }), React.createElement(Materials, {\n            foodId: this.state.foodId,\n            itemId: this.state.itemId,\n            plus: this.state.plus,\n            minus: this.state.minus,\n            plusPrice: this.state.plusPrice,\n            minusHandler: this.materialsMinus,\n            plusHandler: this.materialsPlus,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 385\n            },\n            __self: this\n          })));\n\n        case '#finishorder':\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 399\n            },\n            __self: this\n          }, React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 400\n            },\n            __self: this\n          }, React.createElement(OrderView, {\n            food: this.state.itemsInOrderView,\n            clickHandler: this.handleOrderViewAction,\n            minus: this.state.minus,\n            plus: this.state.plus,\n            plusPrice: this.state.plusPrice,\n            countItemsInFood: this.state.countItemsInFood,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 401\n            },\n            __self: this\n          }), React.createElement(FinishOrder, {\n            food: this.state.itemsInOrderView,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 406\n            },\n            __self: this\n          })));\n\n        default:\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 412\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"Navbar\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 413\n            },\n            __self: this\n          }, React.createElement(Navbar, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 414\n            },\n            __self: this\n          })), React.createElement(OrderView, {\n            food: this.state.itemsInOrderView,\n            clickHandler: this.handleOrderViewAction,\n            minus: this.state.minus,\n            plus: this.state.plus,\n            plusPrice: this.state.plusPrice,\n            countItemsInFood: this.state.countItemsInFood,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 416\n            },\n            __self: this\n          }), React.createElement(\"h1\", {\n            className: \"Menu_title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 421\n            },\n            __self: this\n          }, \"Tilbo\\xF0\"), React.createElement(Offers, {\n            clickHandler: this.handleNewItemInOrder,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 422\n            },\n            __self: this\n          }));\n      }\n    }\n  }]);\n\n  return Menu;\n}(Component);\n\nMenu.propTypes = {\n  foodId: PropTypes.number,\n  foods: PropTypes.object,\n  materialsToChange: PropTypes.string,\n  dispatch: PropTypes.func,\n  isFetching: PropTypes.bool,\n  message: PropTypes.object\n};\n\nvar mapStateToProps1 = function mapStateToProps1(state) {\n  return {\n    isFetching: state.getFood.isFetching,\n    foods: state.getFood.food,\n    message: state.getFood.message\n  };\n};\n\nexport default connect(mapStateToProps1)(Menu);","map":{"version":3,"sources":["/home/alli959/Desktop/Háslóli Íslands 2-20191211T231337Z-001/Háslóli Íslands 2/lokaverkefni/client/src/routes/menu/Menu.js"],"names":["React","Component","connect","PropTypes","Offers","Burgers","fetchFoods","Materials","Boats","Sandwiches","Navbar","OrderView","ChangeOrder","FinishOrder","Menu","props","state","foodId","itemId","countItemsInFood","foods","isFetching","foodToChange","minus","plus","plusPrice","message","itemsInOrderView","materialsPlus","e","doesExist","minusArr","split","i","length","name","splice","join","price","toString","setState","console","log","materialsMinus","plusArr","plusPriceArr","handleNewItemInOrder","push","containsText","contains","includes","handleOrderViewAction","handleSubmit","handleMaterialsInFood","changeFoodToCheck","handleButtonClick","Array","isArray","food","result","orderItemToChange","materialsToChange","map","dispatch","prevProps","location","hash","backgroundColor","propTypes","number","object","string","func","bool","mapStateToProps1","getFood"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAAQC,UAAR,QAAyB,uBAAzB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AAGA,OAAO,YAAP;;IAQMC,I;;;;;AACF,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8EAAMA,KAAN;AADc,UAGlBC,KAHkB,GAGV;AACJC,MAAAA,MAAM,EAAE,CADJ;AAEJC,MAAAA,MAAM,EAAE,CAAC,CAFL;AAGJC,MAAAA,gBAAgB,EAAE,EAHd;AAIJC,MAAAA,KAAK,EAAE,IAJH;AAKJC,MAAAA,UAAU,EAAE,KALR;AAMJC,MAAAA,YAAY,EAAE,IANV;AAOJC,MAAAA,KAAK,EAAE,EAPH;AAQJC,MAAAA,IAAI,EAAE,EARF;AASJC,MAAAA,SAAS,EAAE,EATP;AAUJC,MAAAA,OAAO,EAAE,IAVL;AAWJC,MAAAA,gBAAgB,EAAC;AAXb,KAHU;;AAAA,UAiDlBC,aAjDkB,GAiDF,UAACC,CAAD,EAAO;AAAA,UACZX,MADY,GACF,MAAKF,KADH,CACZE,MADY;AAAA,UAEdM,IAFc,GAEN,MAAKR,KAFC,CAEdQ,IAFc;AAAA,UAGdD,KAHc,GAGL,MAAKP,KAHA,CAGdO,KAHc;AAAA,UAIdE,SAJc,GAID,MAAKT,KAJJ,CAIdS,SAJc;AAKnB,UAAIK,SAAS,GAAG,KAAhB,CALmB,CAQnB;;AACA,UAAIC,QAAQ,GAAGR,KAAK,CAACL,MAAD,CAAL,CAAcc,KAAd,CAAoB,GAApB,CAAf;;AACA,UAAGT,KAAK,CAACL,MAAD,CAAL,KAAkB,MAArB,EAA4B;AACxB,aAAI,IAAIe,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAACF,QAAQ,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAsC;AAClC,cAAGF,QAAQ,CAACE,CAAD,CAAR,KAAgBJ,CAAC,CAACM,IAArB,EAA0B;AACtBL,YAAAA,SAAS,GAAG,IAAZ;AACAC,YAAAA,QAAQ,CAACK,MAAT,CAAgBH,CAAhB;;AACA,gBAAGF,QAAQ,CAACG,MAAT,KAAoB,CAAvB,EAAyB;AACrBX,cAAAA,KAAK,CAACL,MAAD,CAAL,GAAgBa,QAAQ,CAACM,IAAT,CAAc,GAAd,CAAhB;AACH,aAFD,MAGI;AACAd,cAAAA,KAAK,CAACL,MAAD,CAAL,GAAgB,MAAhB;AACH;;AACD;AACH;AACJ;AACJ;;AAED,UAAG,CAACY,SAAJ,EAAc;AAGV,YAAGN,IAAI,CAACN,MAAD,CAAJ,KAAiB,MAApB,EAA2B;AACvBM,UAAAA,IAAI,CAACN,MAAD,CAAJ,GAAeW,CAAC,CAACM,IAAjB;AACAV,UAAAA,SAAS,CAACP,MAAD,CAAT,GAAoBW,CAAC,CAACS,KAAF,CAAQC,QAAR,EAApB;AACH,SAHD,MAII;AACAf,UAAAA,IAAI,CAACN,MAAD,CAAJ,GAAeM,IAAI,CAACN,MAAD,CAAJ,GAAe,GAAf,GAAqBW,CAAC,CAACM,IAAtC;AACAV,UAAAA,SAAS,CAACP,MAAD,CAAT,GAAoBO,SAAS,CAACP,MAAD,CAAT,GAAoB,GAApB,GAA0BW,CAAC,CAACS,KAAF,CAAQC,QAAR,EAA9C;AACH;AACJ;;AAED,YAAKC,QAAL,CAAc;AACVhB,QAAAA,IAAI,EAAEA,IADI;AAEVD,QAAAA,KAAK,EAAEA,KAFG;AAGVE,QAAAA,SAAS,EAAEA;AAHD,OAAd;;AAKAgB,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBxB,MAAtB;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBlB,IAApB;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBnB,KAArB;AACAkB,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBjB,SAAxB;AACH,KAjGiB;;AAAA,UAoGlBkB,cApGkB,GAoGD,UAACd,CAAD,EAAO;AAAA,UACbX,MADa,GACH,MAAKF,KADF,CACbE,MADa;AAAA,UAEfM,IAFe,GAEP,MAAKR,KAFE,CAEfQ,IAFe;AAAA,UAGfD,KAHe,GAGN,MAAKP,KAHC,CAGfO,KAHe;AAAA,UAIfE,SAJe,GAIF,MAAKT,KAJH,CAIfS,SAJe;AAKpB,UAAIK,SAAS,GAAG,KAAhB,CALoB,CAYpB;;AACA,UAAGN,IAAI,CAACN,MAAD,CAAJ,KAAiB,MAApB,EAA2B;AACvB,YAAI0B,OAAO,GAAGpB,IAAI,CAACN,MAAD,CAAJ,CAAac,KAAb,CAAmB,GAAnB,CAAd;AACA,YAAIa,YAAY,GAAGpB,SAAS,CAACP,MAAD,CAAT,CAAkBc,KAAlB,CAAwB,GAAxB,CAAnB;;AACA,aAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAACW,OAAO,CAACV,MAAzB,EAAiCD,CAAC,EAAlC,EAAqC;AACjC,cAAGW,OAAO,CAACX,CAAD,CAAP,KAAeJ,CAAlB,EAAoB;AAChBC,YAAAA,SAAS,GAAG,IAAZ;AACAc,YAAAA,OAAO,CAACR,MAAR,CAAeH,CAAf;AACAY,YAAAA,YAAY,CAACT,MAAb,CAAoBH,CAApB;;AACA,gBAAGW,OAAO,CAACV,MAAR,KAAmB,CAAtB,EAAwB;AACpBV,cAAAA,IAAI,CAACN,MAAD,CAAJ,GAAe0B,OAAO,CAACP,IAAR,CAAa,GAAb,CAAf;AACAZ,cAAAA,SAAS,CAACP,MAAD,CAAT,GAAoB2B,YAAY,CAACR,IAAb,CAAkB,GAAlB,CAApB;AACH,aAHD,MAII;AACAb,cAAAA,IAAI,CAACN,MAAD,CAAJ,GAAe,MAAf;AACAO,cAAAA,SAAS,CAACP,MAAD,CAAT,GAAoB,MAApB;AACH;;AACD;AACH;AACJ;AACJ;;AAED,UAAG,CAACY,SAAJ,EAAc;AAGV,YAAGP,KAAK,CAACL,MAAD,CAAL,KAAkB,MAArB,EAA4B;AACxBK,UAAAA,KAAK,CAACL,MAAD,CAAL,GAAgBW,CAAhB;AACH,SAFD,MAGI;AACAN,UAAAA,KAAK,CAACL,MAAD,CAAL,GAAgBK,KAAK,CAACL,MAAD,CAAL,GAAgB,GAAhB,GAAsBW,CAAtC;AACH;AACJ;;AAED,YAAKW,QAAL,CAAc;AACVhB,QAAAA,IAAI,EAAEA,IADI;AAEVD,QAAAA,KAAK,EAAEA,KAFG;AAGVE,QAAAA,SAAS,EAAEA;AAHD,OAAd;;AAKAgB,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBxB,MAAtB;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBlB,IAApB;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBnB,KAArB;AACAkB,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBjB,SAAxB;AACH,KA1JiB;;AAAA,UA4JlBqB,oBA5JkB,GA4JK,UAACjB,CAAD,EAAO;AAAA,UACnBF,gBADmB,GACC,MAAKX,KADN,CACnBW,gBADmB;AAEtBA,MAAAA,gBAAgB,CAACoB,IAAjB,CAAsBlB,CAAtB;AACA,UAAMN,KAAK,GAAG,MAAKP,KAAL,CAAWO,KAAzB;AACA,UAAMC,IAAI,GAAG,MAAKR,KAAL,CAAWQ,IAAxB;AACA,UAAMC,SAAS,GAAG,MAAKT,KAAL,CAAWS,SAA7B;AACA,UAAMuB,YAAY,GAAGnB,CAAC,CAACoB,QAAvB;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAYM,YAAZ;AACA,UAAM7B,gBAAgB,GAAG,MAAKH,KAAL,CAAWG,gBAApC;;AAEA,UAAGU,CAAC,CAACM,IAAF,CAAOe,QAAP,CAAgB,QAAhB,CAAH,EAA6B;AACzB,YAAMD,QAAQ,GAAGD,YAAY,CAAChB,KAAb,CAAmB,GAAnB,CAAjB;;AACA,aAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAACgB,QAAQ,CAACf,MAA1B,EAAkCD,CAAC,EAAnC,EAAsC;AAClCR,UAAAA,SAAS,CAACsB,IAAV,CAAe,MAAf;AACAxB,UAAAA,KAAK,CAACwB,IAAN,CAAW,MAAX;AACAvB,UAAAA,IAAI,CAACuB,IAAL,CAAU,MAAV;AACH;;AACD5B,QAAAA,gBAAgB,CAAC4B,IAAjB,CAAsBE,QAAQ,CAACf,MAA/B;AAEH,OATD,MAUI;AACAT,QAAAA,SAAS,CAACsB,IAAV,CAAe,MAAf;AACAvB,QAAAA,IAAI,CAACuB,IAAL,CAAU,MAAV;AACAxB,QAAAA,KAAK,CAACwB,IAAN,CAAW,MAAX;AACA5B,QAAAA,gBAAgB,CAAC4B,IAAjB,CAAsB,CAAtB;AACH;;AACD,YAAKP,QAAL,CAAc;AACVhB,QAAAA,IAAI,EAAEA,IADI;AAEVD,QAAAA,KAAK,EAAEA,KAFG;AAGVI,QAAAA,gBAAgB,EAAEA,gBAHR;AAIVR,QAAAA,gBAAgB,EAAEA;AAJR,OAAd;AAMH,KA5La;;AAAA,UA8LlBgC,qBA9LkB,GA8LM,UAACtB,CAAD,EAAO;AAC3B,UAAGA,CAAC,KAAK,OAAT,EAAiB;AACb,cAAKW,QAAL,CAAc;AACVjB,UAAAA,KAAK,EAAE,EADG;AAEVC,UAAAA,IAAI,EAAE,EAFI;AAGVG,UAAAA,gBAAgB,EAAE;AAHR,SAAd;AAKH;AACJ,KAtMiB;;AAAA,UAwMlByB,YAxMkB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAwMH,iBAAOvB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAxMG;;AAAA;AAAA;AAAA;AAAA;;AAAA,UA6MlBwB,qBA7MkB,GA6MM,UAACxB,CAAD,EAAO;AAC3B,YAAKW,QAAL,CAAc;AACVvB,QAAAA,MAAM,EAAEY;AADE,OAAd;AAGH,KAjNiB;;AAAA,UAmNlByB,iBAnNkB,GAmNE,UAACzB,CAAD,EAAO;AAEvB,UAAMX,MAAM,GAAGW,CAAC,CAACX,MAAjB;AACA,UAAMD,MAAM,GAAGY,CAAC,CAACZ,MAAjB;;AACA,UAAGC,MAAM,KAAK,MAAKF,KAAL,CAAWE,MAAzB,EAAgC;AAC5B,cAAKsB,QAAL,CAAc;AACVtB,UAAAA,MAAM,EAAE,CAAC,CADC;AAEVD,UAAAA,MAAM,EAAE,CAAC;AAFC,SAAd;AAIH,OALD,MAMI;AAEA,cAAKuB,QAAL,CAAc;AACVtB,UAAAA,MAAM,EAAEA,MADE;AAEVD,UAAAA,MAAM,EAAEA;AAFE,SAAd;AAIH;AACJ,KApOiB;;AAAA,UAyOlBsC,iBAzOkB,GAyOE,UAAC1B,CAAD,EAAO;AAEvB,UAAGA,CAAC,KAAK,QAAT,EAAkB,CAEjB;;AACD,UAAG2B,KAAK,CAACC,OAAN,CAAc5B,CAAd,CAAH,EAAoB;AAChB,YAAI6B,IAAI,GAAG,MAAK3C,KAAL,CAAWK,KAAX,CAAiBuC,MAA5B;AACA,YAAIrC,YAAY,GAAGO,CAAC,CAAC,CAAD,CAApB;AAEA,YAAI+B,iBAAiB,GAAG,MAAK5C,KAAL,CAAWW,gBAAX,CAA4BE,CAAC,CAAC,CAAD,CAA7B,CAAxB;AACA,YAAIgC,iBAAiB,GAAG,EAAxB;AACAH,QAAAA,IAAI,CAACI,GAAL,CAAS,UAAAH,MAAM,EAAI;AACf,cAAGA,MAAM,CAACxB,IAAP,KAAgBb,YAAnB,EAAgC;AAC5BuC,YAAAA,iBAAiB,GAAGF,MAAM,CAACV,QAA3B;AACH;AACJ,SAJD;;AAMA,cAAKT,QAAL,CAAc;AACVlB,UAAAA,YAAY,EAAEA,YADJ;AAEVsC,UAAAA,iBAAiB,EAAEA,iBAFT;AAGVC,UAAAA,iBAAiB,EAAEA;AAHT,SAAd;AAMH,OAlBD,MAmBK,IAAGhC,CAAC,KAAK,OAAT,EAAiB;AAClB,cAAKW,QAAL,CAAc;AACVb,UAAAA,gBAAgB,EAAE;AADR,SAAd;AAGH,OAJI,MAKD;AACA,YAAGE,CAAC,KAAK,QAAN,IAAkBA,CAAC,KAAK,QAA3B,EAAoC;AAAA,cACxBF,gBADwB,GACJ,MAAKX,KADD,CACxBW,gBADwB;AAEhCA,UAAAA,gBAAgB,CAACoB,IAAjB,CAAsBlB,CAAtB;;AACA,gBAAKW,QAAL,CAAc;AACdb,YAAAA,gBAAgB,EAAEA;AADJ,WAAd;AAGH;AACJ;AAIF,KAlRe;;AAAA;AAEjB;;;;wCA0BmB;AAAA;;AAAA,UACRoC,QADQ,GACI,KAAKhD,KADT,CACRgD,QADQ;AAEhB,UAAI3C,KAAK,GAAG,KAAKL,KAAL,CAAWK,KAAvB;AACI,WAAKoB,QAAL,CAAc;AACVpB,QAAAA,KAAK,EAAEA;AADG,OAAd,EAEE,YAAM;AAACqB,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoB,MAAI,CAAC1B,KAAL,CAAWI,KAA/B;AAAsC,OAF/C;AAGJ2C,MAAAA,QAAQ,CAACzD,UAAU,EAAX,CAAR;AACH;;;uCAGkB0D,S,EAAU;AACzB,UAAGA,SAAS,CAACC,QAAV,CAAmBC,IAAnB,KAA4B,KAAKnD,KAAL,CAAWkD,QAAX,CAAoBC,IAAnD,EAAwD;AACpD,aAAK1B,QAAL,CAAc;AACVtB,UAAAA,MAAM,EAAE,CAAC;AADC,SAAd;AAGH;AACJ;AAED;;;;6BAyOS;AAIL,cAAO,KAAKH,KAAL,CAAWkD,QAAX,CAAoBC,IAA3B;AACI,aAAK,SAAL;AACI,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAK,YAAA,SAAS,EAAG,QAAjB;AAA0B,YAAA,KAAK,EAAI;AAACC,cAAAA,eAAe,EAAE;AAAlB,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CADJ,EAKI,oBAAC,SAAD;AAAW,YAAA,IAAI,EAAE,KAAKnD,KAAL,CAAWW,gBAA5B;AAA8C,YAAA,YAAY,EAAE,KAAKwB,qBAAjE;AACY,YAAA,KAAK,EAAI,KAAKnC,KAAL,CAAWO,KADhC;AACuC,YAAA,IAAI,EAAI,KAAKP,KAAL,CAAWQ,IAD1D;AACgE,YAAA,SAAS,EAAI,KAAKR,KAAL,CAAWS,SADxF;AAEY,YAAA,gBAAgB,EAAI,KAAKT,KAAL,CAAWG,gBAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ,EASI;AAAI,YAAA,SAAS,EAAG,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBATJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,MAAD;AAAS,YAAA,YAAY,EAAE,KAAK2B,oBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CAVJ,CADJ;;AAkBJ,aAAK,UAAL;AAGI,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAK,YAAA,SAAS,EAAG,QAAjB;AAA0B,YAAA,KAAK,EAAI;AAACqB,cAAAA,eAAe,EAAE;AAAlB,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CADJ,EAII,oBAAC,SAAD;AAAW,YAAA,IAAI,EAAE,KAAKnD,KAAL,CAAWW,gBAA5B;AAA8C,YAAA,YAAY,EAAE,KAAKwB,qBAAjE;AACY,YAAA,KAAK,EAAI,KAAKnC,KAAL,CAAWO,KADhC;AACuC,YAAA,IAAI,EAAI,KAAKP,KAAL,CAAWQ,IAD1D;AACgE,YAAA,SAAS,EAAI,KAAKR,KAAL,CAAWS,SADxF;AAEY,YAAA,gBAAgB,EAAI,KAAKT,KAAL,CAAWG,gBAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ,8BAQ8B;AAAI,YAAA,SAAS,EAAG,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAR9B,EASI,oBAAC,OAAD;AAAS,YAAA,YAAY,EAAE,KAAK2B,oBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATJ,CADJ;;AAaJ,aAAK,QAAL;AAGI,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAK,YAAA,SAAS,EAAG,QAAjB;AAA0B,YAAA,KAAK,EAAI;AAACqB,cAAAA,eAAe,EAAE;AAAlB,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CADJ,EAII,oBAAC,SAAD;AAAW,YAAA,IAAI,EAAE,KAAKnD,KAAL,CAAWW,gBAA5B;AAA8C,YAAA,YAAY,EAAE,KAAKwB,qBAAjE;AACY,YAAA,KAAK,EAAI,KAAKnC,KAAL,CAAWO,KADhC;AACuC,YAAA,IAAI,EAAI,KAAKP,KAAL,CAAWQ,IAD1D;AACgE,YAAA,SAAS,EAAI,KAAKR,KAAL,CAAWS,SADxF;AAEY,YAAA,gBAAgB,EAAI,KAAKT,KAAL,CAAWG,gBAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ,8BAQ6B;AAAI,YAAA,SAAS,EAAG,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAR7B,EASI,oBAAC,KAAD;AAAO,YAAA,YAAY,EAAE,KAAK2B,oBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATJ,CADJ;;AAcJ,aAAK,aAAL;AACI,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAK,YAAA,SAAS,EAAG,QAAjB;AAA0B,YAAA,KAAK,EAAI;AAACqB,cAAAA,eAAe,EAAE;AAAlB,aAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CADJ,EAII,oBAAC,SAAD;AAAW,YAAA,IAAI,EAAE,KAAKnD,KAAL,CAAWW,gBAA5B;AAA8C,YAAA,YAAY,EAAE,KAAKwB,qBAAjE;AACY,YAAA,KAAK,EAAI,KAAKnC,KAAL,CAAWO,KADhC;AACuC,YAAA,IAAI,EAAI,KAAKP,KAAL,CAAWQ,IAD1D;AACgE,YAAA,SAAS,EAAI,KAAKR,KAAL,CAAWS,SADxF;AAEY,YAAA,gBAAgB,EAAI,KAAKT,KAAL,CAAWG,gBAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ,8BAQ8B;AAAI,YAAA,SAAS,EAAG,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAR9B,EASI,oBAAC,UAAD;AAAY,YAAA,YAAY,EAAE,KAAK2B,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATJ,CADJ;;AAcJ,aAAK,cAAL;AACI,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACA,oBAAC,WAAD;AAAa,YAAA,KAAK,EAAE,KAAK9B,KAAL,CAAWW,gBAA/B;AACI,YAAA,YAAY,EAAI,KAAK2B,iBADzB;AAEI,YAAA,IAAI,EAAI,KAAKtC,KAAL,CAAWQ,IAFvB;AAGI,YAAA,KAAK,EAAI,KAAKR,KAAL,CAAWO,KAHxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,EAKA,oBAAC,SAAD;AAAW,YAAA,MAAM,EAAI,KAAKP,KAAL,CAAWC,MAAhC;AACY,YAAA,MAAM,EAAI,KAAKD,KAAL,CAAWE,MADjC;AAEY,YAAA,IAAI,EAAI,KAAKF,KAAL,CAAWQ,IAF/B;AAGY,YAAA,KAAK,EAAI,KAAKR,KAAL,CAAWO,KAHhC;AAIY,YAAA,SAAS,EAAI,KAAKP,KAAL,CAAWS,SAJpC;AAKY,YAAA,YAAY,EAAI,KAAKkB,cALjC;AAMY,YAAA,WAAW,EAAI,KAAKf,aANhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALA,CADJ,CADJ;;AAmBJ,aAAK,cAAL;AACQ,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,SAAD;AAAW,YAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWW,gBAA5B;AAA8C,YAAA,YAAY,EAAE,KAAKwB,qBAAjE;AACQ,YAAA,KAAK,EAAI,KAAKnC,KAAL,CAAWO,KAD5B;AACmC,YAAA,IAAI,EAAI,KAAKP,KAAL,CAAWQ,IADtD;AAC4D,YAAA,SAAS,EAAI,KAAKR,KAAL,CAAWS,SADpF;AAEQ,YAAA,gBAAgB,EAAI,KAAKT,KAAL,CAAWG,gBAFvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAMI,oBAAC,WAAD;AAAa,YAAA,IAAI,EAAE,KAAKH,KAAL,CAAWW,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YANJ,CADJ,CADJ;;AAYR;AACI,iBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAK,YAAA,SAAS,EAAG,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,CADJ,EAII,oBAAC,SAAD;AAAW,YAAA,IAAI,EAAE,KAAKX,KAAL,CAAWW,gBAA5B;AAA8C,YAAA,YAAY,EAAE,KAAKwB,qBAAjE;AACY,YAAA,KAAK,EAAI,KAAKnC,KAAL,CAAWO,KADhC;AACuC,YAAA,IAAI,EAAI,KAAKP,KAAL,CAAWQ,IAD1D;AACgE,YAAA,SAAS,EAAI,KAAKR,KAAL,CAAWS,SADxF;AAEY,YAAA,gBAAgB,EAAI,KAAKT,KAAL,CAAWG,gBAF3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ,EASI;AAAI,YAAA,SAAS,EAAG,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBATJ,EAUI,oBAAC,MAAD;AAAQ,YAAA,YAAY,EAAE,KAAK2B,oBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAVJ,CADJ;AAtGR;AAuHH;;;;EAnZc7C,S;;AAAba,I,CAmBKsD,S,GAAY;AACfnD,EAAAA,MAAM,EAAEd,SAAS,CAACkE,MADH;AAEfjD,EAAAA,KAAK,EAAEjB,SAAS,CAACmE,MAFF;AAGfT,EAAAA,iBAAiB,EAAE1D,SAAS,CAACoE,MAHd;AAIfR,EAAAA,QAAQ,EAAE5D,SAAS,CAACqE,IAJL;AAKfnD,EAAAA,UAAU,EAAElB,SAAS,CAACsE,IALP;AAMf/C,EAAAA,OAAO,EAAEvB,SAAS,CAACmE;AANJ,C;;AAuYvB,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC1D,KAAD,EAAW;AAEhC,SAAO;AACHK,IAAAA,UAAU,EAAEL,KAAK,CAAC2D,OAAN,CAActD,UADvB;AAEHD,IAAAA,KAAK,EAAEJ,KAAK,CAAC2D,OAAN,CAAcjB,IAFlB;AAGHhC,IAAAA,OAAO,EAAEV,KAAK,CAAC2D,OAAN,CAAcjD;AAHpB,GAAP;AAMH,CARD;;AAUA,eAAexB,OAAO,CAACwE,gBAAD,CAAP,CAA0B5D,IAA1B,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Offers from '../../components/offers';\r\nimport Burgers from '../../components/burgers';\r\nimport {fetchFoods} from '../../actions/getFood'\r\nimport Materials from '../../components/materials'\r\nimport Boats from '../../components/boats';\r\nimport Sandwiches from '../../components/sandwiches';\r\nimport Navbar from '../../components/navbar';\r\nimport OrderView from '../../components/orderView';\r\nimport ChangeOrder from '../../components/changeOrder';\r\nimport FinishOrder from '../../components/finishOrder';\r\n\r\n\r\nimport './menu.css';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Menu extends Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    state = {\r\n        foodId: 0,\r\n        itemId: -1,\r\n        countItemsInFood: [],\r\n        foods: null,\r\n        isFetching: false,\r\n        foodToChange: null,\r\n        minus: [],\r\n        plus: [],\r\n        plusPrice: [],\r\n        message: null,\r\n        itemsInOrderView:[],\r\n        \r\n    }\r\n    \r\n    static propTypes = {\r\n        foodId: PropTypes.number,\r\n        foods: PropTypes.object,\r\n        materialsToChange: PropTypes.string,\r\n        dispatch: PropTypes.func,\r\n        isFetching: PropTypes.bool,\r\n        message: PropTypes.object,\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        const { dispatch} = this.props;\r\n        let foods = this.props.foods;\r\n            this.setState({\r\n                foods: foods,\r\n            },() => {console.log(\"foods\",this.state.foods)})\r\n        dispatch(fetchFoods());\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.location.hash !== this.props.location.hash){\r\n            this.setState({\r\n                itemId: -1,\r\n            })\r\n        }\r\n    }\r\n\r\n    /**ACTIONS */\r\n\r\n\r\n    materialsPlus = (e) => {\r\n        const {itemId} = this.state;\r\n        let {plus} = this.state;\r\n        let {minus} = this.state;\r\n        let {plusPrice} = this.state;\r\n        let doesExist = false;\r\n\r\n    \r\n        //check if added Material is already in minus\r\n        let minusArr = minus[itemId].split(',');\r\n        if(minus[itemId] !== \"NONE\"){\r\n            for(let i = 0; i<minusArr.length; i++){\r\n                if(minusArr[i] === e.name){\r\n                    doesExist = true;\r\n                    minusArr.splice(i);\r\n                    if(minusArr.length !== 0){\r\n                        minus[itemId] = minusArr.join(',');\r\n                    }\r\n                    else{\r\n                        minus[itemId] = \"NONE\";\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if(!doesExist){\r\n\r\n            \r\n            if(plus[itemId] === \"NONE\"){\r\n                plus[itemId] = e.name;\r\n                plusPrice[itemId] = e.price.toString();\r\n            }\r\n            else{\r\n                plus[itemId] = plus[itemId] + ',' + e.name;\r\n                plusPrice[itemId] = plusPrice[itemId] + ',' + e.price.toString();\r\n            }\r\n        }\r\n            \r\n        this.setState({\r\n            plus: plus,\r\n            minus: minus,\r\n            plusPrice: plusPrice\r\n        });\r\n        console.log(\"MitemId\",itemId);\r\n        console.log(\"Mplus\",plus);\r\n        console.log(\"Mminus\",minus);\r\n        console.log(\"plusPrice\",plusPrice);\r\n    }\r\n\r\n\r\n    materialsMinus = (e) => {\r\n        const {itemId} = this.state;\r\n        let {plus} = this.state;\r\n        let {minus} = this.state;\r\n        let {plusPrice} = this.state;\r\n        let doesExist = false;\r\n\r\n\r\n\r\n        \r\n        \r\n\r\n        //check if removed Material is already in plus\r\n        if(plus[itemId] !== \"NONE\"){\r\n            let plusArr = plus[itemId].split(',');\r\n            let plusPriceArr = plusPrice[itemId].split(',');\r\n            for(let i = 0; i<plusArr.length; i++){\r\n                if(plusArr[i] === e){\r\n                    doesExist = true;\r\n                    plusArr.splice(i);\r\n                    plusPriceArr.splice(i);\r\n                    if(plusArr.length !== 0){\r\n                        plus[itemId] = plusArr.join(',');\r\n                        plusPrice[itemId] = plusPriceArr.join(',');\r\n                    }\r\n                    else{\r\n                        plus[itemId] = \"NONE\";\r\n                        plusPrice[itemId] = \"NONE\";\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if(!doesExist){\r\n\r\n            \r\n            if(minus[itemId] === \"NONE\"){\r\n                minus[itemId] = e;\r\n            }\r\n            else{\r\n                minus[itemId] = minus[itemId] + ',' + e;\r\n            }\r\n        }\r\n            \r\n        this.setState({\r\n            plus: plus,\r\n            minus: minus,\r\n            plusPrice: plusPrice\r\n        });\r\n        console.log(\"PitemId\",itemId);\r\n        console.log(\"Pplus\",plus);\r\n        console.log(\"Pminus\",minus);\r\n        console.log(\"plusPrice\",plusPrice);\r\n    }\r\n    \r\n    handleNewItemInOrder = (e) => {\r\n        const {itemsInOrderView} = this.state;\r\n            itemsInOrderView.push(e);\r\n            const minus = this.state.minus;\r\n            const plus = this.state.plus;\r\n            const plusPrice = this.state.plusPrice;\r\n            const containsText = e.contains;\r\n            console.log(containsText);\r\n            const countItemsInFood = this.state.countItemsInFood;\r\n            \r\n            if(e.name.includes(\"Tilboð\")){\r\n                const contains = containsText.split(',');\r\n                for(let i = 0; i<contains.length; i++){\r\n                    plusPrice.push(\"NONE\");\r\n                    minus.push(\"NONE\");\r\n                    plus.push(\"NONE\");\r\n                }\r\n                countItemsInFood.push(contains.length);\r\n\r\n            }\r\n            else{\r\n                plusPrice.push(\"NONE\");\r\n                plus.push(\"NONE\");\r\n                minus.push(\"NONE\");\r\n                countItemsInFood.push(1);\r\n            }\r\n            this.setState({\r\n                plus: plus,\r\n                minus: minus,\r\n                itemsInOrderView: itemsInOrderView,\r\n                countItemsInFood: countItemsInFood,\r\n            });\r\n        }\r\n\r\n    handleOrderViewAction = (e) => {\r\n        if(e === \"clear\"){\r\n            this.setState({\r\n                minus: [],\r\n                plus: [],\r\n                itemsInOrderView: []\r\n            });\r\n        }\r\n    }\r\n\r\n    handleSubmit = async (e) => {\r\n         \r\n\r\n    }\r\n\r\n    handleMaterialsInFood = (e) => {\r\n        this.setState({\r\n            foodId: e,\r\n        })\r\n    }\r\n\r\n    changeFoodToCheck = (e)  =>{\r\n        \r\n        const itemId = e.itemId;\r\n        const foodId = e.foodId;\r\n        if(itemId === this.state.itemId){\r\n            this.setState({\r\n                itemId: -1,\r\n                foodId: -1\r\n            })\r\n        }\r\n        else{\r\n\r\n            this.setState({\r\n                itemId: itemId,\r\n                foodId: foodId,\r\n            });\r\n        }\r\n    }\r\n\r\n    /** */\r\n\r\n\r\n    handleButtonClick = (e) => {\r\n\r\n        if(e === \"finish\"){\r\n\r\n        }\r\n        if(Array.isArray(e)){\r\n            let food = this.props.foods.result;\r\n            let foodToChange = e[1];\r\n            \r\n            let orderItemToChange = this.state.itemsInOrderView[e[2]];\r\n            let materialsToChange = \"\";\r\n            food.map(result => {\r\n                if(result.name === foodToChange){\r\n                    materialsToChange = result.contains;\r\n                }\r\n            })\r\n\r\n            this.setState({\r\n                foodToChange: foodToChange,\r\n                orderItemToChange: orderItemToChange,\r\n                materialsToChange: materialsToChange,\r\n            })\r\n            \r\n        }\r\n        else if(e === \"clear\"){\r\n            this.setState({\r\n                itemsInOrderView: []\r\n            });\r\n        }\r\n        else{\r\n            if(e !== \"change\" && e !== \"finish\"){\r\n                const { itemsInOrderView} = this.state;\r\n                itemsInOrderView.push(e);\r\n                this.setState({\r\n                itemsInOrderView: itemsInOrderView,\r\n                });\r\n            }\r\n        }\r\n        \r\n        \r\n        \r\n      }\r\n      \r\n      \r\n\r\n\r\n    render() {\r\n\r\n\r\n        \r\n        switch(this.props.location.hash){\r\n            case '#offers':\r\n                return(\r\n                    <div>\r\n                        <div className = \"Navbar\" style = {{backgroundColor: 'rgb(255, 188, 5)'}}>\r\n                            <Navbar/>\r\n                        </div>\r\n\r\n                        <OrderView food={this.state.itemsInOrderView} clickHandler={this.handleOrderViewAction}\r\n                                    minus = {this.state.minus} plus = {this.state.plus} plusPrice = {this.state.plusPrice}\r\n                                    countItemsInFood = {this.state.countItemsInFood}\r\n                        />\r\n                        <h1 className = \"Menu_title\">Tilboð</h1>\r\n                        <div>\r\n                            <Offers  clickHandler={this.handleNewItemInOrder}/>\r\n                            \r\n\r\n                        </div>\r\n                    </div>\r\n                    );\r\n            case '#burgers':\r\n\r\n\r\n                return(\r\n                    <div>\r\n                        <div className = \"Navbar\" style = {{backgroundColor: 'rgb(255, 188, 5)'}}>\r\n                            <Navbar />\r\n                        </div>\r\n                        <OrderView food={this.state.itemsInOrderView} clickHandler={this.handleOrderViewAction}\r\n                                    minus = {this.state.minus} plus = {this.state.plus} plusPrice = {this.state.plusPrice}\r\n                                    countItemsInFood = {this.state.countItemsInFood}\r\n\r\n                        />                        <h1 className = \"Menu_title\">Borgarar</h1>\r\n                        <Burgers clickHandler={this.handleNewItemInOrder} />\r\n                    </div>\r\n                    );\r\n            case '#boats':\r\n\r\n\r\n                return(\r\n                    <div>\r\n                        <div className = \"Navbar\" style = {{backgroundColor: 'rgb(255, 188, 5)'}}>\r\n                            <Navbar />\r\n                        </div>\r\n                        <OrderView food={this.state.itemsInOrderView} clickHandler={this.handleOrderViewAction}\r\n                                    minus = {this.state.minus} plus = {this.state.plus} plusPrice = {this.state.plusPrice}\r\n                                    countItemsInFood = {this.state.countItemsInFood}\r\n\r\n                       />                        <h1 className = \"Menu_title\">Bátar</h1>\r\n                        <Boats clickHandler={this.handleNewItemInOrder} />\r\n                    </div>\r\n                    );\r\n\r\n            case '#sandwiches':\r\n                return(\r\n                    <div>\r\n                        <div classname = \"Navbar\" style = {{backgroundColor: 'rgb(255, 188, 5)'}}>\r\n                            <Navbar />\r\n                        </div>\r\n                        <OrderView food={this.state.itemsInOrderView} clickHandler={this.handleOrderViewAction}\r\n                                    minus = {this.state.minus} plus = {this.state.plus} plusPrice = {this.state.plusPrice}\r\n                                    countItemsInFood = {this.state.countItemsInFood}\r\n\r\n                        />                        <h1 className = \"Menu_title\">Samlokur</h1>\r\n                        <Sandwiches clickHandler={this.handleNewItemInOrder} />\r\n                    </div>\r\n                    );\r\n\r\n            case '#changeorder':\r\n                return(\r\n                    <div>\r\n                        <React.Fragment>\r\n                        <ChangeOrder items={this.state.itemsInOrderView}\r\n                            clickHandler = {this.changeFoodToCheck}\r\n                            plus = {this.state.plus}\r\n                            minus = {this.state.minus} />\r\n                        <Materials foodId = {this.state.foodId}\r\n                                    itemId = {this.state.itemId}\r\n                                    plus = {this.state.plus}\r\n                                    minus = {this.state.minus}\r\n                                    plusPrice = {this.state.plusPrice}\r\n                                    minusHandler = {this.materialsMinus}\r\n                                    plusHandler = {this.materialsPlus}\r\n\r\n                        />\r\n                        </React.Fragment>\r\n                    </div>\r\n                )\r\n            case '#finishorder':\r\n                    return(\r\n                        <div>\r\n                            <React.Fragment>\r\n                                <OrderView food={this.state.itemsInOrderView} clickHandler={this.handleOrderViewAction}\r\n                                        minus = {this.state.minus} plus = {this.state.plus} plusPrice = {this.state.plusPrice}\r\n                                        countItemsInFood = {this.state.countItemsInFood}\r\n\r\n                            />\r\n                                <FinishOrder food={this.state.itemsInOrderView} />\r\n                            </React.Fragment>\r\n                        </div>\r\n                    )\r\n            default:\r\n                return(\r\n                    <div>\r\n                        <div className = \"Navbar\">\r\n                            <Navbar />\r\n                        </div>\r\n                        <OrderView food={this.state.itemsInOrderView} clickHandler={this.handleOrderViewAction}\r\n                                    minus = {this.state.minus} plus = {this.state.plus} plusPrice = {this.state.plusPrice}\r\n                                    countItemsInFood = {this.state.countItemsInFood}\r\n\r\n                        />                        \r\n                        <h1 className = \"Menu_title\">Tilboð</h1>\r\n                        <Offers clickHandler={this.handleNewItemInOrder} />\r\n                    </div>\r\n                );\r\n            \r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps1 = (state) => {\r\n\r\n    return {\r\n        isFetching: state.getFood.isFetching,\r\n        foods: state.getFood.food,\r\n        message: state.getFood.message\r\n    }\r\n        \r\n}\r\n\r\nexport default connect(mapStateToProps1)(Menu);"]},"metadata":{},"sourceType":"module"}